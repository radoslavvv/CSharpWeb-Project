@using CSharpWebProject.Models.ViewModels
@model List<CompetitionViewModel>

<hr />
<h1 class="text-center">Open Competitions: </h1>
<hr />

<a href="/Competitions/Create" class="btn btn-primary">Create Competition</a>

@foreach (var competition in Model)
{
    <div class="card text-center">
        <div class="card-header">
            @if (competition.IsOpen)
            {
                <span>Open</span>
            }
            else
            {
                <span>Closed</span>
            }
        </div>
        <div class="card-body">
            <h5 class="card-title"><a href="/Competitions/Details?id=@competition.Id">@competition.Name</a></h5>
            <p class="card-text">@competition.Description</p>

            @if (!competition.Competitors.FirstOrDefault(c => c.User.UserName == User.Identity.Name).SubmittedTimes && competition.IsOpen)
            {
                <a href="/Competitions/Timer?id=@competition.Id" class="btn btn-primary">Enter</a>
                <a href="/Competitions/Leave?id=@competition.Id" class="btn btn-danger">Leave Competition</a>
            }

            @if (User.IsInRole("Administrator"))
            {
                <a href="/Admin/Competitions/Close?id=@competition.Id" class="btn btn-danger">Close Competition</a>
            }


        </div>
        <div class="card-footer text-muted">
            End Date: @competition.EndDate.ToString("dd/MM/yyyy")
        </div>
    </div>
}


@*<div class="card text-center">
        <div class="card-header">
            Open
        </div>
        <div class="card-body">
            <h5 class="card-title">Bulgaria Open Winter 2018</h5>
            <p class="card-text">The first bulgarian rubik's cube competiton. Join here for so much fun</p>
            <a href="#" class="btn btn-primary">Join Competition</a>
        </div>
        <div class="card-footer text-muted">
            End Date: 12/08/2018
        </div>
    </div>

    <div class="card text-center">
        <div class="card-header">
            Open
        </div>
        <div class="card-body">
            <h5 class="card-title">Bulgaria Open Winter 2018</h5>
            <p class="card-text">The first bulgarian rubik's cube competiton. Join here for so much fun</p>
            <a href="#" class="btn btn-primary">Join Competition</a>
        </div>
        <div class="card-footer text-muted">
            End Date: 12/08/2018
        </div>
    </div>*@
@*<hr />
    <h1 class="text-center">Closed Competitions: </h1>*@

@*@foreach (var closedCompetition in Model.ClosedCompetitions)
    {
        <div class="card text-center">
            <div class="card-header">
                Closed
            </div>
            <div class="card-body">
                <h5 class="card-title"><a href="/Competitions/Details?id=@closedCompetition.Id">@closedCompetition.Name</a></h5>
                <p class="card-text">@closedCompetition.Description</p>
            </div>
            <div class="card-footer text-muted">
                End Date: @closedCompetition.EndDate.ToString("dd/MM/yyyy")
            </div>
        </div>
    }*@
@*<div class="card text-center">
        <div class="card-header">
            Closed
        </div>
        <div class="card-body">
            <h5 class="card-title">Bulgaria Open Winter 2018</h5>
            <p class="card-text">The first bulgarian rubik's cube competiton. Join here for so much fun</p>
            <a href="#" class="btn btn-primary disabled">Competition Ended</a>
        </div>
        <div class="card-footer text-muted">
            End Date: 12/08/2018
        </div>
    </div>*@